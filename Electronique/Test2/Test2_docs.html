<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Test 2 - Bo√Æte noire | UCAO-TECH</title>
  <link rel="icon" href="https://ucaotech.com/wp-content/uploads/2024/10/UCAO-TECH-1.png" type="image/png">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Roboto:wght@300;400;700&display=swap" rel="stylesheet" />
  
  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }
    body {
      background-color: #020c1b;
      color: #e6f1ff;
      font-family: 'Roboto', sans-serif;
      padding: 100px 2rem 2rem 2rem;
    }
    h2, h3, h4, h5, h6 {
      color: #00f7ff;
      font-family: 'Orbitron', sans-serif;
      margin-top: 1rem;
    }
    header {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      z-index: 1000;
      background-color: rgba(2, 12, 27, 0.9);
      backdrop-filter: blur(10px);
      border-bottom: 1px solid rgba(0, 209, 255, 0.2);
    }
    .navbar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      max-width: 1200px;
      margin: 0 auto;
      padding: 1rem 2rem;
    }
    .logo {
      display: flex;
      align-items: center;
      gap: 15px;
      color: white;
      text-decoration: none;
      font-size: 1.5rem;
      font-weight: 700;
    }
    .logo img {
      height: 50px;
      transition: transform 0.5s ease;
      cursor: pointer;
    }
    .logo:hover img {
      transform: rotate(360deg);
    }
    .logo span {
      color: #00d1ff;
    }
    .nav-links {
      display: flex;
      gap: 1.5rem;
    }
    .nav-links a {
      color: rgba(230, 241, 255, 0.8);
      text-decoration: none;
      font-weight: 500;
      font-size: 0.82rem;
      text-transform: uppercase;
      letter-spacing: 1.2px;
      padding: 0.5rem 0.8rem;
      position: relative;
      transition: all 0.3s ease;
    }
    .nav-links a::before {
      content: '';
      position: absolute;
      bottom: 0;
      left: 0;
      width: 0;
      height: 2px;
      background: linear-gradient(90deg, #00d1ff, #9452ff);
      transition: width 0.3s ease;
    }
    .nav-links a:hover {
      color: #00d1ff;
    }
    .nav-links a:hover::before,
    .nav-links a.active::before {
      width: 100%;
    }
    .nav-links a.active {
      color: #00d1ff;
    }
    .section {
      background-color: rgba(10, 25, 47, 0.4);
      padding: 2rem;
      border-radius: 10px;
      margin-top: 2rem;
      max-width: 1000px;
      margin-left: auto;
      margin-right: auto;
    }
    .section p {
      margin-top: 1rem;
      line-height: 1.6;
    }
    ul, ol {
      margin-left: 1.5rem;
      margin-top: 1rem;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin: 1rem 0;
    }
    th, td {
      padding: 0.5rem;
      border: 1px solid #00d1ff;
    }
    pre {
      background-color: #0a192f;
      padding: 1rem;
      overflow-x: auto;
      border-left: 4px solid #00f7ff;
      margin-top: 1rem;
    }
    code {
      font-family: monospace;
      color: #00f7ff;
    }
    iframe {
      margin-top: 1rem;
      border: 1px solid #00d1ff;
    }
    .toc {
      background-color: #081a2b;
      padding: 1rem;
      margin: 2rem 0;
      border-left: 4px solid #00f7ff;
    }
    .toc h4 {
      margin-top: 0;
    }
    .toc ul {
      list-style: none;
      padding-left: 0;
    }
    .toc ul li {
      margin: 0.5rem 0;
    }
    .toc ul li a {
      color: #00d1ff;
      text-decoration: none;
    }
    .toc ul li a:hover {
      text-decoration: underline;
    }

    .component-card {
      display: flex;
      flex-wrap: wrap;
      gap: 2rem;
      background-color: rgba(2, 12, 27, 0.6);
      padding: 1.5rem;
      border-radius: 10px;
      margin: 2rem auto;
      max-width: 900px;
      align-items: center;
      border-left: 4px solid #00f7ff;
      box-shadow: 0 0 10px rgba(0, 209, 255, 0.1);
    }

    .component-img {
      width: 100%;
      max-width: 220px;
      height: auto;
      border-radius: 8px;
      border: 1px solid #00d1ff;
      margin: 0 auto;
      display: block;
      cursor: pointer; /* pour la lightbox */
      transition: transform 0.3s ease;
    }
    .component-img:hover {
      transform: scale(1.05);
    }

    /* Si plusieurs images dans un m√™me composant */
    .component-card .component-img + .component-img {
      margin-top: 1rem;
    }

    /* Sp√©cial pour les images empil√©es */
    .component-card img:not(:first-child) {
      margin-top: 1rem;
    }

    .pcb-section img,
    .schematic-section img {
      max-width: 400px;
      width: 100%;
      height: auto;
      cursor: pointer;
      border-radius: 6px;
      border: 1px solid #00d1ff;
      display: block;
      margin: 0.8rem auto;
      transition: transform 0.3s ease;
    }
    .pcb-section img:hover,
    .schematic-section img:hover {
      transform: scale(1.03);
    }

    @media (max-width: 768px) {
      .component-card {
        flex-direction: column;
        text-align: center;
      }
      .component-img, .component-desc {
        flex: 1 1 100%;
      }
    }

    /* Lightbox styles */
    #lightbox-overlay {
      position: fixed;
      top: 0; left: 0; right: 0; bottom: 0;
      background: rgba(0,0,0,0.85);
      display: none;
      justify-content: center;
      align-items: center;
      z-index: 2000;
      cursor: zoom-out;
    }
    #lightbox-overlay img {
      max-width: 90vw;
      max-height: 90vh;
      box-shadow: 0 0 20px #00d1ff;
      border-radius: 10px;
    }
    .download-btn {
  display: inline-block;
  padding: 12px 25px;
  background: linear-gradient(90deg, #00d1ff, #9452ff);
  color: #fff;
  font-weight: 600;
  text-decoration: none;
  border-radius: 8px;
  box-shadow: 0 4px 12px rgba(0, 209, 255, 0.5);
  transition: background 0.3s ease, box-shadow 0.3s ease;
  font-size: 1rem;
  margin-top: 1rem;
  user-select: none;
}
.download-btn:hover,
.download-btn:focus {
  background: linear-gradient(90deg, #9452ff, #00d1ff);
  box-shadow: 0 6px 16px rgba(148, 82, 255, 0.7);
  outline: none;
}
.download-btn i {
  margin-right: 8px;
  vertical-align: middle;
}

  </style>
</head>
<body>
  <!-- Header -->
  <header>
    <nav class="navbar">
      <a href="https://tekbot-robotics-challenge.github.io/2025-Team-UCAO-TECH-Docs" class="logo">
        <img src="https://ucaotech.com/wp-content/uploads/2024/10/UCAO-TECH-1.png" alt="UCAO-TECH Logo" />
        <span>UCAO-TECH</span>
      </a>
      <ul class="nav-links">
        <li><a href="https://tekbot-robotics-challenge.github.io/2025-Team-UCAO-TECH-Docs">Accueil</a></li>
        <li><a href="https://tekbot-robotics-challenge.github.io/2025-Team-UCAO-TECH-Docs/#a-propos">√Ä propos</a></li>
        <li><a href="https://tekbot-robotics-challenge.github.io/2025-Team-UCAO-TECH-Docs/#equipe">√âquipe</a></li>
        <li><a href="https://tekbot-robotics-challenge.github.io/2025-Team-UCAO-TECH-Docs/#contact">Contact</a></li>
        <li><a href="https://tekbot-robotics-challenge.github.io/2025-Team-UCAO-TECH-Docs/#documentation">Documentation</a></li>
      </ul>
    </nav>
  </header>

  <main>
    <section class="section-doc">
      <h2>Test 2 : Bo√Æte Noire - Communication et Contr√¥le</h2>
      <h3>Dur√©e : 1 semaine</h3>

      <div class="toc">
        <h4>Sommaire</h4>
        <ul>
          <li><a href="#introduction">Introduction</a></li>
          <li><a href="#objectifs">Objectifs du test</a></li>
          <li><a href="#composants">Liste des composants utilis√©s</a></li>
          <li><a href="#architecture">Architecture du syst√®me</a></li>
          <li><a href="#schemas">Sch√©mas √©lectroniques</a></li>
          <li><a href="#pcb">Circuit imprim√©</a></li>
          <li><a href="#simulation">Simulation dans Proteus</a></li>
          <li><a href="#codes">Codes</a></li>
          <li><a href="#contraintes">Contraintes et recommandations</a></li>
          <li><a href="#video">Vid√©o de d√©monstration</a></li>
          <li><a href="#evaluation">Crit√®res d'√©valuation</a></li>
          <li><a href="#conclusion">Conclusion</a></li>
        </ul>
      </div>
      
      <h4>Introduction</h4>
      <p>Dans les secteurs de l'a√©ronautique, de l'automobile ou du ferroviaire, les bo√Ætes noires sont essentielles pour l'enregistrement des donn√©es de fonctionnement. Inspir√©s de ces syst√®mes, nous avons con√ßu un dispositif capable d'enregistrer et de transmettre en temps r√©el les donn√©es de mouvement d'un robot gr√¢ce √† un capteur MPU6050 (acc√©l√©rom√®tre + gyroscope) int√©gr√© dans une bo√Æte cubique.</p>

      <h4>Objectifs du test</h4>
      <ul>
        <li>Mettre en ≈ìuvre un syst√®me d'acquisition de donn√©es inertielle (MPU6050)</li>
        <li>Transmettre les donn√©es via un bus I2C vers une station de contr√¥le</li>
        <li>Afficher les donn√©es en temps r√©el sur un √©cran LCD</li>
        <li>Utiliser des microcontr√¥leurs ATmega328P sans carte Arduino</li>
        <li>Documenter la conception du circuit imprim√© (PCB) et assurer une pr√©sentation professionnelle</li>
      </ul>

      <h4>Liste des composants utilis√©s</h4>
      <div class="component-grid">
        <!-- ATmega328P -->
        <div class="component-card">
          <img src="Images/ATMEGA328P.jpg" alt="ATmega328P" class="component-img" />
          <div class="component-desc">
            <h5>2 √ó ATmega328P</h5>
            <p>C≈ìur du syst√®me, ces microcontr√¥leurs 8-bit g√®rent :</p>
            <ul>
              <li>La communication I2C entre modules</li>
              <li>Le traitement des donn√©es du capteur</li>
              <li>L'affichage sur l'√©cran LCD</li>
            </ul>
            <p>Caract√©ristiques : 32KB Flash, 2KB SRAM, 16MHz</p>
          </div>
        </div>

        <!-- MPU6050 -->
        <div class="component-card">
          <div class="component-desc">
            <h5>1 √ó Module MPU6050</h5>
            <p>Capteur 6 axes (gyroscope + acc√©l√©rom√®tre) utilis√© pour :</p>
            <ul>
              <li>D√©tection de l'orientation spatiale</li>
              <li>Mesure des mouvements brusques</li>
              <li>R√©f√©rence √† la gravit√© terrestre</li>
            </ul>
            <p>Communication via I2C (adresse 0x68)</p>
          </div>
          <img src="../Test1/Images/GY-521.png" alt="MPU6050" class="component-img" />
        </div>

        <!-- LCD 16x2 -->
        <div class="component-card">
          <div class="component-desc">
            <h5>1 √ó √âcran LCD 16x2</h5>
            <p>Interface de visualisation des donn√©es :</p>
            <ul>
              <li>Affiche les donn√©es en temps r√©el</li>
              <li>Contr√¥l√© via interface I2C</li>
              <li>Adresse typique : 0x27 ou 0x3F</li>
            </ul>
            <p>Consommation : ~1mA</p>
          </div>
          <img src="Images/16x2-lcd.webp" alt="LCD 16x2" class="component-img" />
        </div>

        <!-- R√©gulateur 5V -->
        <div class="component-card">
          <div class="component-desc">
            <h5>1 √ó R√©gulateur de tension 5V</h5>
            <p>Stabilise l'alimentation √©lectrique :</p>
            <ul>
              <li>Prot√®ge les composants sensibles</li>
              <li>Type : LM7805</li>
            </ul>
            <p>Courant max : 1A (avec dissipateur)</p>
          </div>
          <img src="Images/regulateurdetension5v.jpg" alt="R√©gulateur 5V" class="component-img" />
        </div>

        <!-- Composants passifs -->
        <div class="component-card">
          <div class="component-desc">
            <h5>R√©sistances, condensateurs, quartz 16MHz</h5>
            <p>√âl√©ments essentiels au fonctionnement :</p>
            <ul>
              <li>R√©sistances 10kŒ© et 220Œ©</li>
              <li>Condensateurs de d√©couplage (100nF)</li>
              <li>Quartz pour l'horloge du microcontr√¥leur</li>
            </ul>
            <p>Pr√©cision requise : ¬±5%</p>
          </div>
          <div style="display: flex; gap: 1rem; flex-wrap: wrap; justify-content: center;">
            <img src="Images/resistance220.jpg" class="component-img" style="max-width: 120px;" alt="R√©sistance 220Œ©"/>
            <img src="Images/CONDENSATEUR100nF.jpg" class="component-img" style="max-width: 120px;" alt="Condensateur 100nF"/>
            <img src="Images/quartz16mhZ.webp" class="component-img" style="max-width: 120px;" alt="Quartz 16MHz"/>
          </div>
        </div>
      </div>

      <h4>Architecture du syst√®me</h4>
      <p>Le syst√®me est r√©parti en deux modules :</p>
      <ul>
        <li><strong>Module capteur (la bo√Æte noire)</strong> : contient l'ATmega328P ma√Ætre I2C et le MPU6050</li>
        <li><strong>Station de contr√¥le</strong> : contient l'ATmega328P esclave I2C et l'√©cran LCD</li>
      </ul>

      <h4>Sch√©mas √©lectroniques (r√©alis√©s sur KiCad)</h4>
      <p>Les circuits ont √©t√© con√ßus avec KiCad pour chaque sous-syst√®me du projet.</p>

      <div class="schematic-gallery">
        <div class="schematic-section">
          <h6>Sch√©ma de l'alimentation</h6>
          <img src="Images/IMG_Circuit_Alimentation.PNG" alt="Sch√©ma alimentation" />
        </div>

        <div class="schematic-section">
          <h6>Sch√©ma de la bo√Æte noire</h6>
          <img src="Images/img_Circuit_Boite_Noire.PNG" alt="Sch√©ma bo√Æte noire" />
        </div>

        <div class="schematic-section">
          <h6>Sch√©ma de la station de contr√¥le</h6>
          <img src="Images/img_Circuit_Station.PNG" alt="Sch√©ma station de contr√¥le" />
        </div>
      </div>

      <h4>Circuit imprim√©</h4>
      <p>Support physique du circuit : PCB personnalis√© pour chaque module : alimentation, bo√Æte noire et station de contr√¥le</p>

      <div class="pcb-gallery">
        <!-- Carte alimentation -->
        <div class="pcb-section">
          <h6>Carte d'alimentation</h6>
          <img src="Images/img_PCBAlimentation.PNG" alt="Carte alimentation 2D" />
          <img src="Images/img_PCB_3D_Alimentation.PNG" alt="Carte alimentation 3D" />
        </div>

        <!-- Carte bo√Æte noire -->
        <div class="pcb-section">
          <h6>Carte de la bo√Æte noire</h6>
          <img src="Images/img_PCB_2D_boite_noire.PNG" alt="Carte bo√Æte noire 2D" />
          <img src="Images/img_PCB_3D_boite_noire.PNG" alt="Carte bo√Æte noire 3D" />
        </div>

        <!-- Carte station de contr√¥le -->
        <div class="pcb-section">
          <h6>Carte de la station de contr√¥le</h6>
          <img src="Images/imgSC_PCB.PNG" alt="Carte station de contr√¥le 2D" />
          <img src="Images/imgSC_3D_front.PNG" alt="Carte station de contr√¥le 3D" />
        </div>
      </div>
<h4>T√©l√©chargement des fichiers KiCad</h4>
<p>T√©l√©chargez ici tous les fichiers sources KiCad regroupant les sch√©mas et PCB du projet :</p>
<a href="Schemas/Circuit_electronique_test2.rar" download class="download-btn" aria-label="T√©l√©charger les fichiers KiCad">
  <i class="fa fa-download"></i> T√©l√©charger le dossier KiCad complet (RAR)
</a>

      <h4 id="simulation">Simulation dans Proteus</h4>
      <p>Le module <strong>MPU6050</strong> n'√©tant pas pr√©sent dans la biblioth√®que officielle de Proteus, nous avons simul√© son comportement en injectant directement des donn√©es constantes dans le microcontr√¥leur ma√Ætre (ATmega328P). Cela permet de v√©rifier le bon fonctionnement du bus I2C, la transmission des donn√©es et l'affichage sur l'√©cran LCD.</p>

      <h5>Structure du dossier de simulation</h5>
      <pre><code>üìÅ Simulation_Proteus_Boite_Noire
‚îú‚îÄ‚îÄ üìÅ maitre
‚îÇ   ‚îú‚îÄ‚îÄ main_maitre.c
‚îÇ   ‚îú‚îÄ‚îÄ i2c_master.c
‚îÇ   ‚îú‚îÄ‚îÄ i2c_master.h
‚îÇ   ‚îî‚îÄ‚îÄ simulation.hex
‚îú‚îÄ‚îÄ üìÅ esclave
‚îÇ   ‚îú‚îÄ‚îÄ main_esclave.c
‚îÇ   ‚îú‚îÄ‚îÄ lcd.c
‚îÇ   ‚îú‚îÄ‚îÄ lcd.h
‚îÇ   ‚îú‚îÄ‚îÄ i2c_slave.c
‚îÇ   ‚îú‚îÄ‚îÄ i2c_slave.h
‚îÇ   ‚îî‚îÄ‚îÄ esclave.hex
‚îî‚îÄ‚îÄ üìÅ proteus
    ‚îî‚îÄ‚îÄ SimulationBoiteNoire.pdsprj
</code></pre>

      <h5>T√©l√©chargement du dossier complet</h5>
      <a href="Simulation/boite_noire_i2c.zip" download class="download-btn" aria-label="T√©l√©charger le projet de simulation Proteus">
        <i class="fa fa-download"></i> T√©l√©charger le projet de simulation (.zip)
      </a>

      <h5 id="video">Vid√©o de d√©monstration de la simulation</h5>
      <div class="video-container">
        <video controls>
          <source src="Simulation/video_simulation.mp4" type="video/mp4">
          Votre navigateur ne supporte pas la lecture de cette vid√©o.
        </video>
      </div>

      
      <h4>Codes</h4>
      <h5>C√¥t√© "bo√Æte noire" (ma√Ætre I2C, avec MPU6050</h5>
      <pre><code>// MPU6050 + ATmega328P - Ma√Ætre I2C
#include <util/delay.h>         // Biblioth√®que pour les d√©lais
#include "i2c_master.h"         // Fichier pour fonctions I2C en ma√Ætre
#include "mpu6050.h"            // Fichier pour g√©rer le capteur MPU6050

void main(void) {
    int16_t ax, ay, az, gx, gy, gz; // Variables pour stocker les donn√©es d'acc√©l√©rom√®tre et gyroscope

    i2c_init();         // Initialisation du bus I2C en mode ma√Ætre
    mpu6050_init();     // Initialisation du capteur MPU6050

    while (1) {
        // Lecture des donn√©es de l'acc√©l√©rom√®tre
        mpu6050_read_accel(&ax, &ay, &az);

        // Lecture des donn√©es du gyroscope (non utilis√©es ici mais disponibles)
        mpu6050_read_gyro(&gx, &gy, &gz);

        // D√©marre la communication I2C avec l'esclave √† l'adresse 0x10
        i2c_start(0x10);

        // Envoi des donn√©es de l‚Äôacc√©l√©rom√®tre Ax, Ay, Az sous forme de 16 bits (haut puis bas)
        i2c_write(ax >> 8);     // Octet de poids fort de ax
        i2c_write(ax & 0xFF);   // Octet de poids faible de ax
        i2c_write(ay >> 8);
        i2c_write(ay & 0xFF);
        i2c_write(az >> 8);
        i2c_write(az & 0xFF);

        i2c_stop();             // Fin de transmission I2C

        _delay_ms(500);        // Attente de 500 ms avant la prochaine lecture
    }
}
</code></pre>

      <h5>C√¥t√© "station de contr√¥le" (esclave I2C + LCD 4 bits)</h5>
      <pre><code>// ATmega328P - Esclave I2C + Afficheur LCD 4 bits
#include "i2c_slave.h"     // Biblioth√®que I2C en mode esclave
#include "lcd.h"           // Biblioth√®que de gestion d‚Äôafficheur LCD (mode 4 bits)

volatile uint8_t buffer[6];   // Tableau pour stocker les 6 octets re√ßus (ax, ay, az)
volatile uint8_t index = 0;   // Index pour le tableau de r√©ception

// Fonction appel√©e √† chaque octet re√ßu via I2C
void receive_event(uint8_t data) {
    buffer[index++] = data;   // Stockage de l‚Äôoctet re√ßu

    if (index >= 6) {         // Une fois 6 octets re√ßus (2 par axe)
        lcd_gotoxy(0, 0);     // Se positionner ligne 1, colonne 0
        lcd_printf("Ax:%d", (buffer[0] << 8) | buffer[1]); // Affiche ax

        lcd_gotoxy(0, 1);     // Se positionner ligne 2, colonne 0
        lcd_printf("Ay:%d", (buffer[2] << 8) | buffer[3]); // Affiche ay

        index = 0;            // R√©initialise l‚Äôindex pour la prochaine s√©rie
    }
}

int main(void) {
    lcd_init();             // Initialisation de l'afficheur LCD
    lcd_clear();            // Efface l'afficheur

    i2c_slave_init(0x10);   // Initialise le microcontr√¥leur comme esclave I2C avec l‚Äôadresse 0x10
    i2c_set_receive_callback(receive_event);  // D√©finition de la fonction √† appeler √† chaque octet re√ßu

    while (1) {
        // Boucle vide : tout est g√©r√© via interruptions et fonctions de rappel (callback)
    }
}
</code></pre>

      <h4>Contraintes et recommandations</h4>
      <ul>
        <li>Ne pas utiliser de carte Arduino ou breadboard dans la version finale</li>
        <li>Bo√Æte cubique de 7 cm avec ouverture sur le dessus si opaque</li>
        <li>C√¢blage propre et composants fix√©s solidement</li>
        <li>Station de contr√¥le s√©par√©e avec √©cran bien lisible</li>
      </ul>

      <h4>Vid√©o de d√©monstration</h4>
      <div class="video-container">
        <video controls>
          <source src="#" type="video/mp4">
          Votre navigateur ne supporte pas la lecture de cette vid√©o.
        </video>
          
      </div>

      <h4>Crit√®res d'√©valuation</h4>
      <table>
        <tr><th>Crit√®re</th><th>D√©tails</th><th>Points</th></tr>
        <tr><td>Circuiterie</td><td>Qualit√© du sch√©ma, soudure, alimentation, pr√©sentation du circuit</td><td>25</td></tr>
        <tr><td>Code</td><td>Lisibilit√©, commentaires, logique du code</td><td>25</td></tr>
        <tr><td>R√©alisation physique</td><td>Esth√©tique de la bo√Æte et du poste de contr√¥le</td><td>10</td></tr>
        <tr><td>Fonctionnement</td><td>Qualit√© de la d√©monstration du syst√®me</td><td>25</td></tr>
        <tr><td>Documentation</td><td>Structure, clart√©, rigueur technique</td><td>10</td></tr>
        <tr><td>Pr√©sentation orale</td><td>Slides, expression orale, r√©ponse aux questions</td><td>5</td></tr>
      </table>

      <h4>Conclusion</h4>
      <p>Ce test a permis de mettre en ≈ìuvre un syst√®me embarqu√© capable de mesurer et transmettre des donn√©es inertielle en temps r√©el. Il s'inscrit dans une logique de fiabilit√©, de rigueur technique et d'int√©gration dans une solution robotique autonome.</p>
    </section>
  </main>
</body>
</html>
